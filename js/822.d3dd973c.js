(self["webpackChunkcollection_remit"]=self["webpackChunkcollection_remit"]||[]).push([[822],{1822:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return c}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"trade-container"},[e("h3",{staticClass:"title"},[t._v("填写并核对订单信息")]),e("div",{staticClass:"content"},[e("h5",{staticClass:"receive"},[t._v("收件人信息")]),t._l(t.addressInfo,(function(s,i){return e("div",{key:s.id,staticClass:"address clearFix"},[e("span",{staticClass:"username",class:{selected:1==s.isDefault}},[t._v(t._s(s.consignee))]),e("p",{on:{click:function(e){return t.changeDefault(s,t.addressInfo)}}},[e("span",{staticClass:"s1"},[t._v(t._s(s.fullAddress))]),e("span",{staticClass:"s2"},[t._v(t._s(s.phoneNum))]),e("span",{directives:[{name:"show",rawName:"v-show",value:1==s.isDefault,expression:"address.isDefault==1"}],staticClass:"s3"},[t._v("默认地址")])])])})),e("div",{staticClass:"line"}),e("h5",{staticClass:"pay"},[t._v("支付方式")]),t._m(0),e("div",{staticClass:"line"}),e("h5",{staticClass:"pay"},[t._v("送货清单")]),t._m(1),e("div",{staticClass:"detail"},[e("h5",[t._v("商品清单")]),t._l(t.orderInfo.detailArrayList,(function(s,i){return e("ul",{key:s.skuId,staticClass:"list clearFix"},[e("li",[e("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:s.imgUrl,alt:""}})]),e("li",[e("p",{staticStyle:{width:"650px"}},[t._v(t._s(s.skuName))]),e("h4",[t._v("7天无理由退货")])]),e("li",[e("h3",[t._v("￥"+t._s(s.orderPrice)+".00")])]),e("li",[t._v("X"+t._s(s.skuNum))]),e("li",[t._v("有货")])])}))],2),e("div",{staticClass:"bbs"},[e("h5",[t._v("买家留言：")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.msg,expression:"msg"}],staticClass:"remarks-cont",attrs:{placeholder:"建议留言前先与商家沟通确认"},domProps:{value:t.msg},on:{input:function(e){e.target.composing||(t.msg=e.target.value)}}})]),e("div",{staticClass:"line"}),t._m(2)],2),e("div",{staticClass:"money clearFix"},[e("ul",[e("li",[e("b",[e("i",[t._v(t._s(t.orderInfo.totalNum))]),t._v("件商品，总商品金额")]),e("span",[t._v("¥"+t._s(t.orderInfo.totalAmount)+".00")])]),t._m(3),t._m(4)])]),e("div",{staticClass:"trade"},[e("div",{staticClass:"price"},[t._v("应付金额:　"),e("span",[t._v("¥"+t._s(t.orderInfo.totalAmount)+".00")])]),e("div",{staticClass:"receiveInfo"},[t._v(" 寄送至: "),e("span",[t._v(t._s(t.userDefaultAddress.fullAddress))]),t._v(" 收货人："),e("span",[t._v(t._s(t.userDefaultAddress.consignee))]),e("span",[t._v(t._s(t.userDefaultAddress.phoneNum))])])]),e("div",{staticClass:"sub clearFix"},[e("a",{staticClass:"subBtn",on:{click:t.submitOrder}},[t._v("提交订单")])])])},r=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"address clearFix"},[e("span",{staticClass:"username selected"},[t._v("在线支付")]),e("span",{staticClass:"username",staticStyle:{"margin-left":"5px"}},[t._v("货到付款")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"way"},[e("h5",[t._v("配送方式")]),e("div",{staticClass:"info clearFix"},[e("span",{staticClass:"s1"},[t._v("天天快递")]),e("p",[t._v("配送时间：预计8月10日（周三）09:00-15:00送达")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"bill"},[e("h5",[t._v("发票信息：")]),e("div",[t._v("普通发票（电子） 个人 明细")]),e("h5",[t._v("使用优惠/抵用")])])},function(){var t=this,e=t._self._c;return e("li",[e("b",[t._v("返现：")]),e("span",[t._v("0.00")])])},function(){var t=this,e=t._self._c;return e("li",[e("b",[t._v("运费：")]),e("span",[t._v("0.00")])])}],a=(s(5711),s(3822)),o={name:"Trade",data(){return{msg:"",orderId:""}},mounted(){this.$store.dispatch("trade/getUserAddress"),this.$store.dispatch("trade/getOrderInfo")},computed:{...(0,a.rn)({addressInfo(t){return t.trade.address},orderInfo(t){return t.trade.orderInfo}}),userDefaultAddress(){return this.addressInfo.find((t=>1==t.isDefault))||[]}},methods:{changeDefault(t,e){e.forEach((t=>{t.isDefault=0})),t.isDefault=1},async submitOrder(){let{tradeNo:t}=this.orderInfo,e={consignee:this.userDefaultAddress.consignee,consigneeTel:this.userDefaultAddress.phoneNum,deliveryAddress:this.userDefaultAddress.fullAddress,paymentWay:"ONLINE",orderComment:this.msg,orderDetailList:this.orderInfo.detailArrayList},s=await this.$api.reqSubmitOrder(t,e);200==s.code?(this.orderId=s.data,this.$router.push("/pay?orderId="+this.orderId)):alert(s.data)}}},n=o,u=s(1001),l=(0,u.Z)(n,i,r,!1,null,"295100ff",null),c=l.exports},5711:function(t,e,s){s(7334)},7334:function(t,e,s){s(1703);var i=s(8463);e.operation=function(t){var s=e.timeouts(t);return new i(s,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})},e.timeouts=function(t){if(t instanceof Array)return[].concat(t);var e={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var s in t)e[s]=t[s];if(e.minTimeout>e.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var i=[],r=0;r<e.retries;r++)i.push(this.createTimeout(r,e));return t&&t.forever&&!i.length&&i.push(this.createTimeout(r,e)),i.sort((function(t,e){return t-e})),i},e.createTimeout=function(t,e){var s=e.randomize?Math.random()+1:1,i=Math.round(s*Math.max(e.minTimeout,1)*Math.pow(e.factor,t));return i=Math.min(i,e.maxTimeout),i},e.wrap=function(t,s,i){if(s instanceof Array&&(i=s,s=null),!i)for(var r in i=[],t)"function"===typeof t[r]&&i.push(r);for(var a=0;a<i.length;a++){var o=i[a],n=t[o];t[o]=function(i){var r=e.operation(s),a=Array.prototype.slice.call(arguments,1),o=a.pop();a.push((function(t){r.retry(t)||(t&&(arguments[0]=r.mainError()),o.apply(this,arguments))})),r.attempt((function(){i.apply(t,a)}))}.bind(t,n),t[o].options=s}}},8463:function(t,e,s){function i(t,e){"boolean"===typeof e&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}s(1703),t.exports=i,i.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},i.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},i.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=(new Date).getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var s=this._timeouts.shift();if(void 0===s){if(!this._cachedTimeouts)return!1;this._errors.splice(0,this._errors.length-1),s=this._cachedTimeouts.slice(-1)}var i=this;return this._timer=setTimeout((function(){i._attempts++,i._operationTimeoutCb&&(i._timeout=setTimeout((function(){i._operationTimeoutCb(i._attempts)}),i._operationTimeout),i._options.unref&&i._timeout.unref()),i._fn(i._attempts)}),s),this._options.unref&&this._timer.unref(),!0},i.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var s=this;this._operationTimeoutCb&&(this._timeout=setTimeout((function(){s._operationTimeoutCb()}),s._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},i.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)},i.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)},i.prototype.start=i.prototype.try,i.prototype.errors=function(){return this._errors},i.prototype.attempts=function(){return this._attempts},i.prototype.mainError=function(){if(0===this._errors.length)return null;for(var t={},e=null,s=0,i=0;i<this._errors.length;i++){var r=this._errors[i],a=r.message,o=(t[a]||0)+1;t[a]=o,o>=s&&(e=r,s=o)}return e}}}]);